<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Image</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ugfx_logo_doxygen.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">version 2.6</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___image.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">Image<div class="ingroups"><a class="el" href="group___g_d_i_s_p.html">GDISP</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Sub-Module for image handling. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgdisp_image.html">gdispImage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The structure for an image.  <a href="structgdisp_image.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa30580f275638221103f23c66b51a093"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#gaa30580f275638221103f23c66b51a093">gdispImageInit</a> (<a class="el" href="structgdisp_image.html">gdispImage</a> *img)</td></tr>
<tr class="memdesc:gaa30580f275638221103f23c66b51a093"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a <a class="el" href="structgdisp_image.html" title="The structure for an image. ">gdispImage</a> object.  <a href="#gaa30580f275638221103f23c66b51a093">More...</a><br /></td></tr>
<tr class="separator:gaa30580f275638221103f23c66b51a093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad25cc67595fa7fb0ea5ce1a4d58f661c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___image.html#gaa7ef6ca3a925955b398ecc98db94cb72">gdispImageError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c">gdispImageOpenGFile</a> (<a class="el" href="structgdisp_image.html">gdispImage</a> *img, <a class="el" href="group___g_f_i_l_e.html#ga9c16692b9062a0701a5442c2d19d29b2">GFILE</a> *f)</td></tr>
<tr class="memdesc:gad25cc67595fa7fb0ea5ce1a4d58f661c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an image using an open GFILE and get it ready for drawing.  <a href="#gad25cc67595fa7fb0ea5ce1a4d58f661c">More...</a><br /></td></tr>
<tr class="separator:gad25cc67595fa7fb0ea5ce1a4d58f661c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1277ca176dc2020dc9be9b5228a7596"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#gad1277ca176dc2020dc9be9b5228a7596">gdispImageClose</a> (<a class="el" href="structgdisp_image.html">gdispImage</a> *img)</td></tr>
<tr class="memdesc:gad1277ca176dc2020dc9be9b5228a7596"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an image and release any dynamically allocated working storage.  <a href="#gad1277ca176dc2020dc9be9b5228a7596">More...</a><br /></td></tr>
<tr class="separator:gad1277ca176dc2020dc9be9b5228a7596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05aaca44fe63d2a4fd59a133c3a1698f"><td class="memItemLeft" align="right" valign="top">bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#ga05aaca44fe63d2a4fd59a133c3a1698f">gdispImageIsOpen</a> (<a class="el" href="structgdisp_image.html">gdispImage</a> *img)</td></tr>
<tr class="memdesc:ga05aaca44fe63d2a4fd59a133c3a1698f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is an image open.  <a href="#ga05aaca44fe63d2a4fd59a133c3a1698f">More...</a><br /></td></tr>
<tr class="separator:ga05aaca44fe63d2a4fd59a133c3a1698f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0cb760bce6be8c9cb1affc5d568663f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#ga0cb760bce6be8c9cb1affc5d568663f1">gdispImageSetBgColor</a> (<a class="el" href="structgdisp_image.html">gdispImage</a> *img, <a class="el" href="group___colors.html#ga9b197f3fbe1d6b515cbc5098e72e7c3a">color_t</a> bgcolor)</td></tr>
<tr class="memdesc:ga0cb760bce6be8c9cb1affc5d568663f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the background color of the image.  <a href="#ga0cb760bce6be8c9cb1affc5d568663f1">More...</a><br /></td></tr>
<tr class="separator:ga0cb760bce6be8c9cb1affc5d568663f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga64d7d91ad42198a86d92e82849e85e92"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___image.html#gaa7ef6ca3a925955b398ecc98db94cb72">gdispImageError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#ga64d7d91ad42198a86d92e82849e85e92">gdispImageCache</a> (<a class="el" href="structgdisp_image.html">gdispImage</a> *img)</td></tr>
<tr class="memdesc:ga64d7d91ad42198a86d92e82849e85e92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cache the image.  <a href="#ga64d7d91ad42198a86d92e82849e85e92">More...</a><br /></td></tr>
<tr class="separator:ga64d7d91ad42198a86d92e82849e85e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf15638864d7ea728d5a85496e3b1360a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___image.html#gaa7ef6ca3a925955b398ecc98db94cb72">gdispImageError</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#gaf15638864d7ea728d5a85496e3b1360a">gdispGImageDraw</a> (GDisplay *g, <a class="el" href="structgdisp_image.html">gdispImage</a> *img, <a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a> x, <a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a> y, <a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a> cx, <a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a> cy, <a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a> sx, <a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a> sy)</td></tr>
<tr class="memdesc:gaf15638864d7ea728d5a85496e3b1360a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draw the image.  <a href="#gaf15638864d7ea728d5a85496e3b1360a">More...</a><br /></td></tr>
<tr class="separator:gaf15638864d7ea728d5a85496e3b1360a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga602e98c3327135c721d90852da80cbe2"><td class="memItemLeft" align="right" valign="top">delaytime_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#ga602e98c3327135c721d90852da80cbe2">gdispImageNext</a> (<a class="el" href="structgdisp_image.html">gdispImage</a> *img)</td></tr>
<tr class="memdesc:ga602e98c3327135c721d90852da80cbe2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare for the next frame/page in the image file.  <a href="#ga602e98c3327135c721d90852da80cbe2">More...</a><br /></td></tr>
<tr class="separator:ga602e98c3327135c721d90852da80cbe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga288dd2b5bf07d70253c9d7e3082d2e94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#ga288dd2b5bf07d70253c9d7e3082d2e94">gdispImageOpenFile</a>(img,  filename)&#160;&#160;&#160;<a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c">gdispImageOpenGFile</a>((img), <a class="el" href="group___g_f_i_l_e.html#ga32e39e94ea2fdec5e08d4cb182779049">gfileOpen</a>((filename), &quot;rb&quot;))</td></tr>
<tr class="memdesc:ga288dd2b5bf07d70253c9d7e3082d2e94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an image in a file and get it ready for drawing.  <a href="#ga288dd2b5bf07d70253c9d7e3082d2e94">More...</a><br /></td></tr>
<tr class="separator:ga288dd2b5bf07d70253c9d7e3082d2e94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabdf642e4eaec723cec23b51a64a1c689"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#gabdf642e4eaec723cec23b51a64a1c689">gdispImageOpenBaseFileStream</a>(img,  BaseFileStreamPtr)&#160;&#160;&#160;<a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c">gdispImageOpenGFile</a>((img), gfileOpenBaseFileStream((BaseFileStreamPtr), &quot;rb&quot;))</td></tr>
<tr class="memdesc:gabdf642e4eaec723cec23b51a64a1c689"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an image in a ChibiOS basefilestream and get it ready for drawing.  <a href="#gabdf642e4eaec723cec23b51a64a1c689">More...</a><br /></td></tr>
<tr class="separator:gabdf642e4eaec723cec23b51a64a1c689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7297db078d110d9b11bea074808eebfc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#ga7297db078d110d9b11bea074808eebfc">gdispImageOpenMemory</a>(img,  ptr)&#160;&#160;&#160;<a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c">gdispImageOpenGFile</a>((img), <a class="el" href="group___g_f_i_l_e.html#gaf06db697f591a7cd66ac613c406571f0">gfileOpenMemory</a>((void *)(ptr), &quot;rb&quot;))</td></tr>
<tr class="memdesc:ga7297db078d110d9b11bea074808eebfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an image in memory and get it ready for drawing.  <a href="#ga7297db078d110d9b11bea074808eebfc">More...</a><br /></td></tr>
<tr class="separator:ga7297db078d110d9b11bea074808eebfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga4d5c75e836cb7bc6eda07568ca5843f0"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#ga4d5c75e836cb7bc6eda07568ca5843f0">gdispImageType</a></td></tr>
<tr class="memdesc:ga4d5c75e836cb7bc6eda07568ca5843f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of image.  <a href="#ga4d5c75e836cb7bc6eda07568ca5843f0">More...</a><br /></td></tr>
<tr class="separator:ga4d5c75e836cb7bc6eda07568ca5843f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa7ef6ca3a925955b398ecc98db94cb72"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#gaa7ef6ca3a925955b398ecc98db94cb72">gdispImageError</a></td></tr>
<tr class="memdesc:gaa7ef6ca3a925955b398ecc98db94cb72"><td class="mdescLeft">&#160;</td><td class="mdescRight">An image error code.  <a href="#gaa7ef6ca3a925955b398ecc98db94cb72">More...</a><br /></td></tr>
<tr class="separator:gaa7ef6ca3a925955b398ecc98db94cb72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2478bada26b4b185ec44644b9c51b9b"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#gac2478bada26b4b185ec44644b9c51b9b">gdispImageFlags</a></td></tr>
<tr class="memdesc:gac2478bada26b4b185ec44644b9c51b9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Image flags.  <a href="#gac2478bada26b4b185ec44644b9c51b9b">More...</a><br /></td></tr>
<tr class="separator:gac2478bada26b4b185ec44644b9c51b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd593f2fd78d17f90002b1b15428848a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structgdisp_image.html">gdispImage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___image.html#gafd593f2fd78d17f90002b1b15428848a">gdispImage</a></td></tr>
<tr class="memdesc:gafd593f2fd78d17f90002b1b15428848a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The structure for an image.  <a href="#gafd593f2fd78d17f90002b1b15428848a">More...</a><br /></td></tr>
<tr class="separator:gafd593f2fd78d17f90002b1b15428848a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaf15638864d7ea728d5a85496e3b1360a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___image.html#gaa7ef6ca3a925955b398ecc98db94cb72">gdispImageError</a> gdispGImageDraw </td>
          <td>(</td>
          <td class="paramtype">GDisplay *&#160;</td>
          <td class="paramname"><em>g</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structgdisp_image.html">gdispImage</a> *&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a>&#160;</td>
          <td class="paramname"><em>cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a>&#160;</td>
          <td class="paramname"><em>cy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a>&#160;</td>
          <td class="paramname"><em>sx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_d_i_s_p.html#ga6dd7c08f29e3e0ad51fca28cac66c735">coord_t</a>&#160;</td>
          <td class="paramname"><em>sy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Draw the image. </p>
<dl class="section return"><dt>Returns</dt><dd>GDISP_IMAGE_ERR_OK (0) on success or an error code.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">g</td><td>The display to draw on </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">x,y</td><td>The screen location to draw the image </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cx,cy</td><td>The area on the screen to draw </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sx,sy</td><td>The image position to start drawing at</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>gdispImageOpen() must have returned successfully.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>If sx,sy + cx,cy is outside the image boundaries the area outside the image is simply not drawn. </dd>
<dd>
If <code><a class="el" href="group___image.html#ga64d7d91ad42198a86d92e82849e85e92" title="Cache the image. ">gdispImageCache()</a></code> has been called first for this frame, this routine will draw using a fast blit from the cached frame. If not, it reads the input and decodes it as it is drawing. This may be significantly slower than if the image has been cached (but uses a lot less RAM) </dd></dl>

<p>Referenced by <a class="el" href="gwin__progressbar_8c_source.html#l00230">gwinProgressbarDraw_Std()</a>, and <a class="el" href="gwin__slider_8c_source.html#l00343">gwinSliderDraw_Std()</a>.</p>

</div>
</div>
<a class="anchor" id="ga64d7d91ad42198a86d92e82849e85e92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___image.html#gaa7ef6ca3a925955b398ecc98db94cb72">gdispImageError</a> gdispImageCache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgdisp_image.html">gdispImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cache the image. </p>
<p>Decodes and caches the current frame into RAM. </p><dl class="section return"><dt>Returns</dt><dd>GDISP_IMAGE_ERR_OK (0) on success or an error code.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>gdispImageOpen() must have returned successfully.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This can use a LOT of RAM! </dd>
<dd>
The decoder may choose to ignore the request for caching. If it does so it will return GDISP_IMAGE_ERR_UNSUPPORTED_OK. </dd>
<dd>
A fatal error here does not necessarily mean that drawing the image will fail. For example, a GDISP_IMAGE_ERR_NOMEMORY error simply means there isn't enough RAM to cache the image. </dd></dl>

</div>
</div>
<a class="anchor" id="gad1277ca176dc2020dc9be9b5228a7596"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gdispImageClose </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgdisp_image.html">gdispImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Close an image and release any dynamically allocated working storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="group___image.html#ga288dd2b5bf07d70253c9d7e3082d2e94" title="Open an image in a file and get it ready for drawing. ">gdispImageOpenFile()</a> must have returned successfully.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Also calls the IO close function (if it hasn't already been called). </dd></dl>

</div>
</div>
<a class="anchor" id="gaa30580f275638221103f23c66b51a093"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gdispImageInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgdisp_image.html">gdispImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise a <a class="el" href="structgdisp_image.html" title="The structure for an image. ">gdispImage</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure to initialise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga05aaca44fe63d2a4fd59a133c3a1698f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool_t gdispImageIsOpen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgdisp_image.html">gdispImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is an image open. </p>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the image is currently open.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Be careful with calling this on an uninitialized image structure as the image will contain random data which may be interpreted as meaning the image is open. Clearing the Image structure to 0's will guarantee the image is seen as being closed. </dd></dl>

</div>
</div>
<a class="anchor" id="ga602e98c3327135c721d90852da80cbe2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">delaytime_t gdispImageNext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgdisp_image.html">gdispImage</a> *&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare for the next frame/page in the image file. </p>
<dl class="section return"><dt>Returns</dt><dd>A time in milliseconds to keep displaying the current frame before trying to draw the next frame. Watch out for the special values TIME_IMMEDIATE and TIME_INFINITE.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>gdispImageOpen() must have returned successfully.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>It will return TIME_IMMEDIATE if the first frame/page hasn't been drawn or if the next frame should be drawn immediately. </dd>
<dd>
It will return TIME_INFINITE if another image frame doesn't exist or an error has occurred. </dd>
<dd>
Images that support multiple pages (eg TIFF files) will return TIME_IMMEDIATE between pages and then TIME_INFINITE when there are no more pages. </dd>
<dd>
An image that displays a looped animation will never return TIME_INFINITE unless it gets an error. </dd>
<dd>
Calling gdispImageDraw() after getting a TIME_INFINITE will go back to drawing the first frame/page. </dd></dl>

</div>
</div>
<a class="anchor" id="gad25cc67595fa7fb0ea5ce1a4d58f661c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___image.html#gaa7ef6ca3a925955b398ecc98db94cb72">gdispImageError</a> gdispImageOpenGFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgdisp_image.html">gdispImage</a> *&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___g_f_i_l_e.html#ga9c16692b9062a0701a5442c2d19d29b2">GFILE</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an image using an open GFILE and get it ready for drawing. </p>
<p>Determine the image format and get ready to decode the first image frame </p><dl class="section return"><dt>Returns</dt><dd>GDISP_IMAGE_ERR_OK (0) on success or an error code.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f</td><td>The open GFILE stream.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The GFILE must be open for reading.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This determines which decoder to use and then initialises all other fields in the <a class="el" href="structgdisp_image.html" title="The structure for an image. ">gdispImage</a> structure. </dd>
<dd>
The image background color is set to White. </dd>
<dd>
There are three types of return - everything OK, partial success and unrecoverable failures. For everything OK it returns GDISP_IMAGE_ERR_OK. A partial success can be distinguished from a unrecoverable failure by testing the GDISP_IMAGE_ERR_UNRECOVERABLE bit in the error code. A partial success return code means an image can still be drawn but perhaps with reduced functionality eg only the first page of a multi-page image. </dd>
<dd>
<code><a class="el" href="group___image.html#gad1277ca176dc2020dc9be9b5228a7596" title="Close an image and release any dynamically allocated working storage. ">gdispImageClose()</a></code> should be called when finished with the image. This will close the image and its underlying GFILE file. Note that images opened with partial success (eg GDISP_IMAGE_ERR_UNSUPPORTED_OK) still need to be closed when you are finished with them. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0cb760bce6be8c9cb1affc5d568663f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gdispImageSetBgColor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgdisp_image.html">gdispImage</a> *&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___colors.html#ga9b197f3fbe1d6b515cbc5098e72e7c3a">color_t</a>&#160;</td>
          <td class="paramname"><em>bgcolor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the background color of the image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bgcolor</td><td>The background color to use</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>gdispImageOpen() must have returned successfully.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This color is only used when an image has to restore part of the background before continuing with drawing that includes transparency eg some GIF animations. </dd></dl>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gabdf642e4eaec723cec23b51a64a1c689"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define gdispImageOpenBaseFileStream</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">img, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">BaseFileStreamPtr&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c">gdispImageOpenGFile</a>((img), gfileOpenBaseFileStream((BaseFileStreamPtr), &quot;rb&quot;))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an image in a ChibiOS basefilestream and get it ready for drawing. </p>
<p>Determine the image format and get ready to decode the first image frame </p><dl class="section return"><dt>Returns</dt><dd>GDISP_IMAGE_ERR_OK (0) on success or an error code.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>GFILE_NEED_CHIBIOSFS and GFX_USE_OS_CHIBIOS must be TRUE. This only makes sense on the ChibiOS operating system.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BaseFileStreamPtr</td><td>A pointer to an open BaseFileStream</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function just opens the GFILE using the basefilestream and passes it to <code><a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c" title="Open an image using an open GFILE and get it ready for drawing. ">gdispImageOpenGFile()</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="gdisp__image_8h_source.html#l00137">137</a> of file <a class="el" href="gdisp__image_8h_source.html">gdisp_image.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga288dd2b5bf07d70253c9d7e3082d2e94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define gdispImageOpenFile</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">img, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">filename&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c">gdispImageOpenGFile</a>((img), <a class="el" href="group___g_f_i_l_e.html#ga32e39e94ea2fdec5e08d4cb182779049">gfileOpen</a>((filename), &quot;rb&quot;))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an image in a file and get it ready for drawing. </p>
<p>Determine the image format and get ready to decode the first image frame </p><dl class="section return"><dt>Returns</dt><dd>GDISP_IMAGE_ERR_OK (0) on success or an error code.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>You must have included the file-system support into GFILE that you want to use.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>The filename to open</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function just opens the GFILE using the filename and passes it to <code><a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c" title="Open an image using an open GFILE and get it ready for drawing. ">gdispImageOpenGFile()</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="gdisp__image_8h_source.html#l00122">122</a> of file <a class="el" href="gdisp__image_8h_source.html">gdisp_image.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7297db078d110d9b11bea074808eebfc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define gdispImageOpenMemory</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">img, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ptr&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c">gdispImageOpenGFile</a>((img), <a class="el" href="group___g_f_i_l_e.html#gaf06db697f591a7cd66ac613c406571f0">gfileOpenMemory</a>((void *)(ptr), &quot;rb&quot;))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open an image in memory and get it ready for drawing. </p>
<p>Determine the image format and get ready to decode the first image frame </p><dl class="section return"><dt>Returns</dt><dd>GDISP_IMAGE_ERR_OK (0) on success or an error code.</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>GFILE_NEED_MEMFS must be TRUE</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">img</td><td>The image structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>A pointer to the image bytes in memory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function just opens the GFILE using the basefilestream and passes it to <code><a class="el" href="group___image.html#gad25cc67595fa7fb0ea5ce1a4d58f661c" title="Open an image using an open GFILE and get it ready for drawing. ">gdispImageOpenGFile()</a></code>. </dd></dl>

<p>Definition at line <a class="el" href="gdisp__image_8h_source.html#l00151">151</a> of file <a class="el" href="gdisp__image_8h_source.html">gdisp_image.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gafd593f2fd78d17f90002b1b15428848a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structgdisp_image.html">gdispImage</a>  <a class="el" href="structgdisp_image.html">gdispImage</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The structure for an image. </p>

</div>
</div>
<a class="anchor" id="gaa7ef6ca3a925955b398ecc98db94cb72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="group___image.html#gaa7ef6ca3a925955b398ecc98db94cb72">gdispImageError</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An image error code. </p>

<p>Definition at line <a class="el" href="gdisp__image_8h_source.html#l00037">37</a> of file <a class="el" href="gdisp__image_8h_source.html">gdisp_image.h</a>.</p>

</div>
</div>
<a class="anchor" id="gac2478bada26b4b185ec44644b9c51b9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="group___image.html#gac2478bada26b4b185ec44644b9c51b9b">gdispImageFlags</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Image flags. </p>

<p>Definition at line <a class="el" href="gdisp__image_8h_source.html#l00050">50</a> of file <a class="el" href="gdisp__image_8h_source.html">gdisp_image.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga4d5c75e836cb7bc6eda07568ca5843f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="group___image.html#ga4d5c75e836cb7bc6eda07568ca5843f0">gdispImageType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type of image. </p>

<p>Definition at line <a class="el" href="gdisp__image_8h_source.html#l00026">26</a> of file <a class="el" href="gdisp__image_8h_source.html">gdisp_image.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jul 28 2016 14:53:56 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
